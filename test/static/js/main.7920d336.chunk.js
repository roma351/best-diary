(this.webpackJsonptest12=this.webpackJsonptest12||[]).push([[0],{128:function(e,t,a){e.exports=a(162)},144:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(31),c=a.n(r),l=a(14),i=a.n(l),s=a(42),u=a.n(s),d=a(57),p=a(6),m=a(37),h=a.n(m),f=a(65),g=a.n(f),b=(a(47),a(24)),v=a.n(b),E=a(25),j=a.n(E),k=a(63),O=a.n(k),w=a(62),_=a.n(w),y=a(45),S=a.n(y),C=a(5),I=(a(144),a(161),function(e){window.location.search;var t=o.a.useState(""),a=Object(p.a)(t,2),n=(a[0],a[1],o.a.useState(!1)),r=Object(p.a)(n,2),c=(r[0],r[1],o.a.useState("")),l=Object(p.a)(c,2),i=(l[0],l[1],o.a.useState({name:"",vendor:""})),s=Object(p.a)(i,2),u=s[0],d=s[1],m=o.a.useState(""),h=Object(p.a)(m,2),f=h[0],g=h[1],b=o.a.useState("1"),E=Object(p.a)(b,2),k=(E[0],E[1]),w=o.a.useState(""),y=Object(p.a)(w,2),I=(y[0],y[1],o.a.useState(!1)),x=Object(p.a)(I,2),A=x[0],R=x[1],B=o.a.useRef(),W=o.a.useState([]),K=Object(p.a)(W,2),P=K[0],T=K[1];return o.a.createElement(v.a,{id:e.id},o.a.createElement(j.a,null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),o.a.createElement(C.e,null,o.a.createElement(C.f,{top:"\u0414\u043d\u0435\u0432\u043d\u0438\u043a"},o.a.createElement(C.l,{id:"source_sh",onChange:function(e){return 3==(t=e.target.value)?(console.log(t),R(!0)):R(!1),void k(t);var t}},o.a.createElement("option",{value:"1"},"school.mosreg.ru"),o.a.createElement("option",{value:"2"},"dnevnik.ru"),o.a.createElement("option",{value:"3"},"eljur.ru"))),A&&o.a.createElement(o.a.Fragment,null,o.a.createElement(C.f,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0448\u043a\u043e\u043b\u044b:"},o.a.createElement(C.j,{className:"input",value:u.name,onChange:function(e){var t;t=e.target.value,fetch("https://likeee.online/api2/login.php?source=3&q="+t+"&search=1").then((function(e){return e.json()})).then((function(e){T(function(e,t){return t?e.data.map((function(e){return{name:e.name,vendor:e.vendor,region:e.name2}})):[]}(e,t))})).catch((function(e){throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: "+e)})),d(t)},onFocus:function(){B.current.classList.add("active")},onBlur:function(){setTimeout((function(){B.current.classList.remove("active")}),100)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u043a\u043e\u043b\u044b"})),o.a.createElement("div",{className:"dropdown",ref:B},P.length&&o.a.createElement(o.a.Fragment,null,P.map((function(e,t){return o.a.createElement("div",{onClick:function(t){d(e),g(e.vendor)},key:t},o.a.createElement("div",null,e.name),o.a.createElement("div",null,e.region))}))))),o.a.createElement(C.f,{top:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"},o.a.createElement(C.j,{id:"login_sh",type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d"}),o.a.createElement(C.j,{id:"password_sh",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),o.a.createElement("input",{id:"vend",type:"hidden",value:f}))),o.a.createElement(_.a,{title:"Navigation Example"},o.a.createElement(S.a,null,o.a.createElement(O.a,{size:"xl",level:"2",onClick:e.goo},"\u0412\u043e\u0439\u0442\u0438"))),o.a.createElement(S.a,null,o.a.createElement(C.n,{id:"lol2",level:"3",weight:"semibold",style:{marginBottom:16}},e.fetch_log)))}),x=a(39),A=a.n(x),R=a(40),B=a.n(R),W=a(41),K=a.n(W),P=a(38),T=a.n(P),U=(a(56),Object(C.o)()),V=function(e){return o.a.createElement(v.a,{id:e.id},o.a.createElement(j.a,{left:o.a.createElement(A.a,{onClick:e.go,"data-to":"auth"},U===C.i?o.a.createElement(B.a,null):o.a.createElement(K.a,null))},"Persik"),o.a.createElement("img",{className:"Persik",src:T.a,alt:"Persik The Cat"}))},G=a(64);Object(C.o)();var M=function(e){var t=o.a.useState(null),a=Object(p.a)(t,2),n=a[0],r=a[1];return e.bridge.send("VKWebAppGetAds").then((function(e){r({promoBannerProps3:e})})),o.a.createElement(v.a,{id:e.id},o.a.createElement(j.a,null,"\u0414\u043d\u0435\u0432\u043d\u0438\u043a"),o.a.createElement(C.g,null,o.a.createElement(C.h,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),o.a.createElement(C.m,{description:e.fetch_ranking,before:o.a.createElement(C.a,{id:"ava12",src:e.fetch_avatar})},e.fetch_user),o.a.createElement(C.g,null,o.a.createElement(C.c,{style:{display:"flex"}},o.a.createElement(C.b,Object(G.a)({size:"l",stretched:!0,mode:"destructive",style:{marginRight:8},onClick:e.goes,"data-to":"home"},"style",{marginRight:8}),"\u0412\u044b\u0445\u043e\u0434"),o.a.createElement(C.b,{size:"l",stretched:!0,href:"https://vk.me/club198596704",target:"_blank"},"\u0414\u0430\u043b\u0435\u0435")))),o.a.createElement(C.d,{vertical:"bottom"},n&&o.a.createElement(C.k,{bannerData:n})))};i.a.send("VKWebAppInit"),i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:198596704}),i.a.send("VKWebAppJoinGroup",{group_id:198596704});var N=function(){var e=Object(n.useState)("home"),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(p.a)(c,2),s=(l[0],l[1]),m=Object(n.useState)(o.a.createElement(g.a,{size:"large"})),f=Object(p.a)(m,2),b=(f[0],f[1]),v=Object(n.useState)(null),E=Object(p.a)(v,2),j=(E[0],E[1]),k=Object(n.useState)(!1),O=Object(p.a)(k,2),w=(O[0],O[1]),_=Object(n.useState)([]),y=Object(p.a)(_,2),S=(y[0],y[1],Object(n.useState)(null)),C=Object(p.a)(S,2),x=C[0],A=C[1],R=Object(n.useState)(null),B=Object(p.a)(R,2),W=B[0],K=B[1],P=Object(n.useState)(null),T=Object(p.a)(P,2),U=T[0],G=T[1],N=Object(n.useState)(null),z=Object(p.a)(N,2),F=z[0],J=z[1],L=Object(n.useState)(null),H=Object(p.a)(L,2),q=H[0],D=H[1],Q=Object(n.useState)(null),X=Object(p.a)(Q,2),Y=X[0],Z=X[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,s(t),b(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var o=document.createAttribute("scheme");o.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(o)}})),function(){e.apply(this,arguments)}(),fetch("https://likeee.online/api2/login.php",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"params_vk="+encodeURIComponent(window.location.search)+"&payload="+encodeURIComponent(window.location.hash)}).then((function(e){return e.json()})).then((function(e){Z("");if(Z("https://login.school.mosreg.ru/oauth2?response_type=token&client_id=594df05cfea34e66994960ae72a2150d&scope=Schools,Relatives,EduGroups,Lessons,marks,EduWorks,Avatar&redirect_uri=https://roma351.github.io/best-diary/get_code.html&state="+btoa(window.location.search)+"&cc_key="),w(!0),"ok"==e.response){var t=e.data.profile.source;A(""),K(""),G(""),J(""),A(e.data.profile.code);var a=e.data.profile.code;r("auth"),fetch("https://likeee.online/api2/context.php?code="+a).then((function(e){return e.json()})).then((function(e){w(!0),"ok"==e.response&&(K(e.data.first_name+" "+e.data.last_name),G(e.data.avatar),fetch("https://likeee.online/api2/rating.php?type=isOnly&code="+a).then((function(e){return e.json()})).then((function(e){w(!0),"ok"==e.response&&J("mosreg"==t?e.data.ranking.averageMark+" / "+e.data.ranking.place+" \u043c\u0435\u0441\u0442\u043e":e.data.ranking.averageMark)}),(function(e){w(!0),j(e)})))}),(function(e){w(!0),j(e)}))}else"not_auth"!=e.error&&D(e.error_msg)}),(function(e){D("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"),w(!0),j(e)}))}),[]);var $=function(e){r(e.currentTarget.dataset.to)};return o.a.createElement(h.a,{activePanel:a},o.a.createElement(I,{id:"home",go:$,goo:function(e){var t=document.getElementById("login_sh").value,a=document.getElementById("password_sh").value,n=document.getElementById("source_sh").value,o=document.getElementById("vend").value;fetch("https://likeee.online/api2/login.php",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"vendor="+encodeURIComponent(o)+"&login="+t+"&password="+a+"&source="+n+"&params_vk="+encodeURIComponent(window.location.search)+"&payload="+encodeURIComponent(window.location.hash)}).then((function(e){return e.json()})).then((function(e){if(w(!0),"ok"==e.response){var t=e.data.profile.source;D(""),A(""),K(""),G(""),J(""),A(e.data.profile.code);var a=e.data.profile.code;r("auth"),fetch("https://likeee.online/api2/context.php?code="+a).then((function(e){return e.json()})).then((function(e){w(!0),"ok"==e.response&&(K(e.data.first_name+" "+e.data.last_name),G(e.data.avatar),fetch("https://likeee.online/api2/rating.php?type=isOnly&code="+a).then((function(e){return e.json()})).then((function(e){w(!0),"ok"==e.response&&J("mosreg"==t?e.data.ranking.averageMark+" / "+e.data.ranking.place+" \u043c\u0435\u0441\u0442\u043e":e.data.ranking.averageMark)}),(function(e){w(!0),j(e)})))}),(function(e){w(!0),j(e)}))}else D(e.error_msg)}),(function(e){D("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"),w(!0),j(e)}))},fetch_log:q,fetch_sign:Y}),o.a.createElement(V,{id:"persik",go:$}),o.a.createElement(M,{id:"auth",go:$,goes:function(e){fetch("https://likeee.online/api2/login.php?logout=1&code="+x).then((function(e){return e.json()})).then((function(e){w(!0),"ok"==e.response?(D(""),A(""),K(""),G(""),J(""),r("home")):console.log("\u041f\u0438\u0437\u0434\u0430")}),(function(e){w(!0),j(e)})),r("home")},fetch_user:W,fetch_avatar:U,fetch_ranking:F,bridge:i.a}))};i.a.send("VKWebAppInit"),c.a.render(o.a.createElement(N,null),document.getElementById("root"))},38:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},56:function(e,t,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.7920d336.chunk.js.map